
```{r eval='TRUE', echo=FALSE, results='asis'}
if(colorNum ==0)  cat('\n##',c,'\n'); #cat('\n'); 

```


### `r this_cut`  

#### Price Plot - 2nd Level

```{r eval=TRUE, echo=FALSE, fig.retina=1, dpi = 72,results='asis', warning=FALSE}

data <- filter(diamonds, color == c) %>%
  filter(cut == this_cut) %>%
  as.data.frame()

# ## ----Data preparation for this chunk and the following chunk(prevent server-side on-load processing)
# data <-subset(diamonds, color == c) %>%
#   filter(cut == this_cut) %>%
#   as.data.frame()
# 
# clarity_list <- levels(data$clarity)
# price_list <- NULL
# 
# for (i in 1:length(clarity_list)) {
#   d <- filter(data, clarity == clarity_list[i]) 
#   price_list[[i]] <- d
# }
# 
# price_lists <- bind_rows(price_list) %>%
#   head(10)
# saveRDS(price_lists, file = paste0('./input/cache/diamond/',c ,'_', this_cut,'.RDS'))
# ##----------End----------

## Output for this chunk
plot(x = data$clarity, y = data$price, ylab = 'Price', xlab = 'clarity')

```


#### Detail Table - 3rd Level


```{r eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}

tableOut <- NULL
tableNum <- 0

for (cl in seq_along(length(levels(data$clarity)))){

      this_clarity <- levels(data$clarity)[cl]
      # env2 = new.env()
      tableOut <- c(tableOut, knit(text = knit_expand("sample_grandChild_simple.Rmd"), quiet=TRUE))
      # tableOut = c(tableOut, knit_child('sample_grandChild.Rmd', envir = env2))
      tableNum <- tableNum +1
    }

```

`r paste(tableOut, collapse='\n')`